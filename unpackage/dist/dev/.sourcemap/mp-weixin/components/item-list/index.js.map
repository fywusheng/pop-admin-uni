{"version":3,"sources":["webpack:////Users/tongjiangfei/Downloads/workspace/learn/pop-admin-uni/components/item-list/index.vue?60e1","webpack:////Users/tongjiangfei/Downloads/workspace/learn/pop-admin-uni/components/item-list/index.vue?9024","webpack:////Users/tongjiangfei/Downloads/workspace/learn/pop-admin-uni/components/item-list/index.vue?f5b0","webpack:////Users/tongjiangfei/Downloads/workspace/learn/pop-admin-uni/components/item-list/index.vue?dd95","uni-app:///components/item-list/index.vue","webpack:////Users/tongjiangfei/Downloads/workspace/learn/pop-admin-uni/components/item-list/index.vue?d244","webpack:////Users/tongjiangfei/Downloads/workspace/learn/pop-admin-uni/components/item-list/index.vue?68f7"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAk1B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsBt2B;AACA;AACA;AACA,uF;AACA;AACA,qDADA;AAEA,MAFA,kBAEA;AACA;AACA,iBADA;AAEA;AACA,kBADA;AAEA,gBAFA,EAFA;;AAMA,mBANA;AAOA,uBAPA;AAQA,cARA;;AAUA,GAbA;AAcA;AACA,SADA,mBACA;AACA;AACA,KAHA;AAIA,SAJA,mBAIA;AACA;AACA,iCADA;AAEA,8CAFA;;AAIA,KATA,EAdA;;AAyBA,gBAzBA;AA0BA;AACA,UADA,kBACA,IADA,EACA;AACA;AACA,KAHA;AAIA,YAJA,sBAIA;AACA,gCADA;AAEA,sBAFA,GAEA;AACA,qDADA;AAEA,iDAFA,EAFA;;AAMA,gDANA;AAOA,iBAPA;;;AAUA,iBAVA;;;AAaA,iBAbA,wBAQA,2CARA,2CAWA,2DAXA;AAcA,yEAdA;;;AAiBA,qCAjBA;AAkBA;AACA,kCADA,GAlBA,UAkBA,MAlBA;;AAqBA;AACA;AACA,sBADA,GACA,EADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAdA;AAeA;AACA;AACA,qBAFA,MAEA;AACA;AACA;AACA;AACA;AACA,qBAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBA/BA;AAgCA;AACA;AACA,iBA1DA;AA2DA,KA/DA,EA1BA;;AA2FA,SA3FA,qBA2FA;AACA;AACA,2DADA;AAEA,6BAFA;;AAIA;AACA;AACA;AACA,6BAFA;AAGA,2BAJA,CAJA,SAIA,QAJA;AASA;AACA;AACA,yBAXA;;AAaA;AACA;AACA,eAhBA;AAiBA,GA5GA,E;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAAA;AAA6jD,CAAgB,k6CAAG,EAAC,C;;;;;;;;;;;ACAjlD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/item-list/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=70166530&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/item-list/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=70166530&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n  <div>\r\n    <ul class=\"topic-item-list\">\r\n      <li class=\"item\" @click=\"goItem(item)\" v-for=\"(item,index) in list\" :key=\"index\">\r\n        <img class=\"item-logo\" lazy-load mode=\"aspectFit\" :src=\"item.proPictDir\">\r\n        <div class=\"brand-name\">{{ item.brandName }}</div>\r\n        <div class=\"item-name\">{{ item.name }}</div>\r\n        <div class=\"item-price\">\r\n          &yen;{{ item.costPriceStr }}\r\n        </div>\r\n        <div class=\"sale-out-wrap\"\r\n             v-if=\"item.saleState !== 5 || item.availableStock === 0\">\r\n          <img class=\"sale-out\" src=\"/static/images/sale-out.png\">\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    <div class=\"load-tips\" v-show=\"loading\">加载中<span class=\"dots\">...<i class=\"mask\"></i></span></div>\r\n    <div id=\"loadMore\" class=\"load-more\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\nimport ENV from \"@/config/env\";\nimport XIU from \"@/utils/index.js\"; \nimport Axios from \"@/config/axios.js\";\nimport _ from \"@/utils/lodash.js\";\r\nexport default {\r\n  props: ['mode', 'instance_id', 'common', 'content'],\r\n  data() {\r\n    return {\r\n      timer: null,\r\n      pagination: {\r\n        current: 1,\r\n        size: 10,\r\n      },\r\n      loading: true,\r\n      all_loaded: false,\r\n      list: [],\r\n    }\r\n  },\r\n  computed: {\r\n    image() {\r\n      return XIU.getImgFormat(this.content.image)\r\n    },\r\n    style() {\r\n      return {\r\n        color: this.content.color,\r\n        backgroundColor: this.content.bg_color,\r\n      }\r\n    }\r\n  },\r\n  components: {},\r\n  methods: {\r\n    goItem(item) {\r\n      XIU.bridge.goItem(item.id)\r\n    },\r\n    async loadData() {\r\n      if (this.all_loaded) return;\r\n      const params = {\r\n        pageNum: this.pagination.current++,\r\n        pageSize: this.pagination.size,\r\n      }\r\n      switch (this.content.link.meta.itemType) {\r\n        case 0:\r\n          params.salesPlanId = this.content.link.id;\r\n          break;\r\n        case 1:\r\n          params.brandIds = this.content.link.meta.objIds.join(',');\r\n          break;\r\n        case 2:\r\n          params.dispId = this.content.link.meta.objIds.join(',');\r\n          break;\r\n      }\r\n      this.loading = true;\r\n      const result = await Axios.get(ENV.SEARCH, {\r\n        params: params,\r\n      })\r\n      this.loading = false;\r\n      if (result.esProducts) {\r\n        const list = [];\r\n        result.esProducts.forEach(data => {\r\n          const tempData = _.pick(data, ['id', 'skuList', 'mainImgUrl', 'brandName', 'name', 'price', 'stockBlance', 'saleState']);\r\n          let availableStock = 0, minMarkOffPrice = 0, maxMarkOffPrice = 0, minCostPrice = 0, maxCostPrice = 0;\r\n          tempData.skuList && tempData.skuList.forEach(sku => {\r\n            availableStock += sku.availableStock;\r\n            if (minMarkOffPrice === 0 || minMarkOffPrice > sku.markOffPrice) {\r\n              minMarkOffPrice = sku.markOffPrice\r\n            }\r\n            if (maxMarkOffPrice === 0 || maxMarkOffPrice < sku.markOffPrice) {\r\n              maxMarkOffPrice = sku.markOffPrice\r\n            }\r\n            if (minCostPrice === 0 || minCostPrice >sku.sellingPrice) {\r\n              minCostPrice =sku.sellingPrice\r\n            }\r\n            if (maxCostPrice === 0 || maxCostPrice <sku.sellingPrice) {\r\n              maxCostPrice =sku.sellingPrice\r\n            }\r\n          })\r\n          if(minMarkOffPrice !== maxMarkOffPrice){\r\n            tempData.markOffPriceStr = `${minMarkOffPrice}-${maxMarkOffPrice}`\r\n          }else{\r\n            tempData.markOffPriceStr = minMarkOffPrice;\r\n          }\r\n          if(minCostPrice !== maxCostPrice){\r\n            tempData.costPriceStr = `${minCostPrice}-${maxCostPrice}`\r\n          }else{\r\n            tempData.costPriceStr = minCostPrice;\r\n          }\r\n          tempData.availableStock = availableStock;\r\n          tempData.proPictDir = XIU.getImgFormat(tempData.mainImgUrl, '/resize,w_750')\r\n          list.push(tempData)\r\n        })\r\n        this.list = this.list.concat(list);\r\n        this.all_loaded = this.pagination.current > result.totalPage;\r\n      }\r\n    }\r\n  },\r\n  async mounted() {\r\n    XIU.Bus.$on('pageScroll', async () => {\r\n      if (this.all_loaded || this.loading) {\r\n        return false;\r\n      }\r\n      const viewport = await new Promise(resolve => {\r\n        wx.createSelectorQuery().select('#loadMore').boundingClientRect().exec(res => {\r\n          resolve(res[0])\r\n        })\r\n      })\r\n      if (viewport.top < App.systemInfo.windowHeight + 100) {\r\n        this.loadData();\r\n      }\r\n    })\r\n    if (this.content.link && this.content.link.id) {\r\n      this.loadData();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"~@/styles/base\";\r\n\r\n.topic-item-list {\r\n  @include item-list();\r\n}\r\n\r\n.load-tips {\r\n  $bgc: #eee;\r\n  $h: 70rpx;\r\n  height: rpx($h);\r\n  line-height: rpx($h);\r\n  text-align: center;\r\n  background: $bgc;\r\n  color: #555;\r\n  font-size: 15px;\r\n\r\n  .dots {\r\n    font-family: sans-serif;\r\n    position: relative;\r\n    height: $h;\r\n\r\n    .mask {\r\n      position: absolute;\r\n      right: 0;\r\n      top: 0;\r\n      z-index: 20;\r\n      background-color: $bgc;\r\n      width: 100%;\r\n      height: 100%;\r\n      animation: dotsAni 1.5s ease-out infinite forwards;\r\n    }\r\n  }\r\n}\r\n\r\n@keyframes dotsAni {\r\n  0% {\r\n    width: 100%;\r\n  }\r\n  70% {\r\n    width: 0;\r\n  }\r\n  100% {\r\n    width: 0;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1648813379558\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}